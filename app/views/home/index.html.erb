<div id="maincontainer">
  <br><br><br>
  <div class="row"> 
    <div class="col-xs-8 col-md-offset-2">
      <div class="input-group">
        <div class="input-group-btn search-panel">
          
          

       <select name="state" id="state_select" class="btn btn-default dropdown-toggle" >
            <option value="">Any State</option>
            <%= State.each do |s| %>
            <option value="<%= s %>"><%= s %></option>
            <% end %>
          </select>
        
        <select name="city" id="city_select" class="btn btn-default dropdown-toggle">
          </select> 

       
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
              <span id="search_concept">Search by</span> <span class="caret"></span>
            </button>

            <ul class="dropdown-menu" role="menu">
              <li><a data-turbolinks="false" href="<%= produces_path %>">Produce </a></li>
              <li><a data-turbolinks="false" href="<%= farmsites_path %>">Farmsite </a></li>
              <li><a data-turbolinks="false" href="#company">Company </a></li>
              <li class="divider"></li>
              <li><a href="#all">Anything</a></li>
            </ul>
          </div>

          <input type="hidden" name="search_param" value="all" id="search_param">         
          <input type="text" class="form-control" id = "params_search" name="x" placeholder="Type here...">

          <span class="input-group-btn">
            <button class="btn btn-default" type="button" id="button_search"><span class="glyphicon glyphicon-search"></span></button>
          </span>
        </div>
      </div>
    </div>




    <br><br><br>
    <marquee behavior="alternate" scrollamount="10" direction="up">
      <center>
        <h1>WELCOME TO TANIMALL</h1>
        <p><font size="6" color="white">Sign Up & Join Us Now!</font></p>
      </center>
    </marquee>

  </div>
</div>
<br>

<br>

<!-- <div class="row">
  <div class="col-lg-1"></div>
  <div class="col-lg-3">

    <p>
      <strong>About Us:</strong>
      <br>
      TaniMall is an innovative and exciting auction site in Malaysia. We sell fresh products from the farms like vegetables, fruits, flowers, meat, grain, poultry, dairy product and seafood.
    </p>
  </div>

  <div class="col-lg-3">
    <p>
      <strong>Address:</strong>
      <br>
      TaniMac Co.(@Waldania Group)
      <br>
      BLOCK 3730,PERSIARAN APEC,
      <br>
      63000 CYBERJAYA,
      <br>
      SELANGOR, MALAYSIA.
      <br>
    </p>
  </div>

  <div class="col-lg-4">
  </p>
  <strong>Contact:</strong>
  <br>
  Phone : +6012-5903983 (Ridzuan) or +6013-4015799 (Fitri) 
  <br>
  Email : customersupport@tanimac.com
</p>
</div>
<div class="col-lg-1"></div>
</div> -->

<script>

  $("#button_search").click(function(){
    searching_for_data();
  });


  $("#params_search").keypress(function(e){
    if(e.which == 13){searching_for_data();}

  });

  function searching_for_data(){


    var params_search = $("#params_search").val();
    var search_concept = $("#search_concept").text().trim();
    var city = $("#city_select").val();
    var state = $("#state_select").val();

   //alert(state);

   if(search_concept == "Produce"){
    Turbolinks.visit("/produces?search=" + params_search + "&state=" + state + "&city=" + city );
    //
  }
  if(search_concept == "Farmsite"){
    Turbolinks.visit("/farmsites?search=" + params_search + "&state=" + state + "&city=" + city);
  }
  if(search_concept == "Company"){
    Turbolinks.visit("/farmsites?search=" + params_search+ "&state=" + state + "&city=" + city );
  }
}

city = <%= raw(City.to_json) %>

$('#state_select').change(function(){
    //show alert
  //alert ($('#farmsite_farmsitestate').val())
  //array city(#farmsite_farmsitesstate)
  console.log( city[ $('#state_select').val() ] )
  //remove first element in arary
  city[ $('#state_select').val() ].shift();
  //loop 
  $("#city_select").html("")
  $("#city_select").append("<option value=''> Any City </option>")
  $.each( city[ $('#state_select').val() ],  function(i,v){
    console.log(v)
  //append list sume dalam array selain guna html
  $("#city_select").append("<option value='" + v + "'> " + v + "</option>")
}) 
});

</script>



